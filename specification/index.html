<!DOCTYPE html>
<html>
<head>
  <title>PropertyCross Specification</title>
</head>

<body>
  <p>This specification details the form and functionality of the
  PropertyCross applications. Its intended purpose is to ensure that each PropertyCross
  implementation is as close to the others as possible (within the constraints imposed by
  the implementation framework). Regarding form, this specification details the UI
  controls that should be included on each screen, but does not mandate a specific
  layout. The intention of the PropertyCross project is that each implementation should
  match the native look and feel of each of the target platforms (Roboto, Metro,
  Apple-style), hence the ambiguity regarding the exact screen layout.</p>

  <p>PropertyCross makes use of the Nestoria APIs for searching property
  listings. This specification details how these APIs should be used.</p>

  <h1>Property Search Page</h1>

  <h2>Form</h2>

  <p><img height="336" src="images/image01.png" width="569" /></p>

  <p>The landing screen includes:</p>

  <ul>
    <li>Instructional text</li>

    <li>A text field for entry of search term</li>

    <li>A &lsquo;My location&rsquo; button</li>

    <li>A &lsquo;Go&rsquo; button</li>

    <li>A region which either displays recent search terms or a list
    of locations to pick from</li>

    <li>A region which is used to report error
    messages</li>

    <li>A button which navigates to the favourites
    page</li>
  </ul>


  <p>The following text is used:</p>

  <ul>
    <li>Instructional text &ndash; &ldquo;Use the form
    below to search for houses to buy. You can search by place-name, postcode, or click
    'My location', to search in your current location!&rdquo;</li>

    <li>Heading above recent searches list &ndash;
    &ldquo;Recent searches:&rdquo;</li>

    <li>Heading above recent suggested locations list
    &ndash; &ldquo;Please select a location below:&rdquo;</li>
  </ul>

  <h2>Function</h2>

  <h3>Initial state</h3>

  <p>When the application is launched, recent searches should be
  displayed and the search entry field should be empty.Each recent search should be
  accompanied with the number of properties it matches.</p>

  <h4>Plain-text search</h4>

  <p>When the user enters text into the search field, then hits
  &lsquo;enter&rsquo; or commits the edit, the Nestoria APIs should be queried to find
  properties. The response code is processed as follows:</p>

  <ul>
    <li>100, 101, 110 &ndash; the query returned a list of
    properties, the application should check that one or more properties were returned
    and navigate to the Search Results page. In the case where the location matches, but
    no properties were found, the page moves to the &ldquo;Error state&rdquo;</li>

    <li>200, 202 &ndash; the search term was ambiguous. In this case
    Nestoria returns a list of suggested locations. The returned list of locations should
    be displayed to the user as detailed in the &ldquo;Listed locations
    state&rdquo;</li>

    <li>Other &ndash; any other response is considered an error, the
    page moves to the &ldquo;Error state&rdquo;</li>
  </ul>

  <p>The HTTP request sent to Nestoria should timeout after 5 seconds if
  no response is received, with the page moving to the &ldquo;Error
  state&rdquo;.</p>

  <h4>Location-based  search</h4>

  <p>When the user touches the &lsquo;My location&rsquo; button a
  geo-location query is sent to Netoria. The response codes should be handled in the same
  way as the plain-text search.</p>
  
  <p>If location is not enabled for the application, or the location
  cannot be found the page oves to teh &ldquo;Error state&rdquo;.</p>

  <h3>Listed locations state</h3>

  <p>In this state a list of suggested locations is displayed. Tapping
  on a location will cause the search text field to update with the text of the location
  and a search to be executed immediately.</p>

  <p>NOTE: The Nestoria API locations have two different text strings
  associated with them, one is the human-readable text, e.g. &ldquo;Albury,
  Guildford&rdquo;, the other is the text which should be used to search for that
  location, e.g. &ldquo;albury_guildford&rdquo;, i.e. its &lsquo;key&rsquo;. Therefore,
  when selecting a location the the text field should display the human-readable text,
  but search for the location &lsquo;key&rsquo;.</p>

  <p>If the user navigates back to the Property Search page then repeats
  the same search, again the location &lsquo;key&rsquo; should be used. However, if the
  user edits the text within the search text field, the location &lsquo;key&rsquo; is no
  longer used.</p>

  <h3>Error state</h3>

  <p>When the page is in error state neither recent searches nor
  locations are listed. A text based error message is displayed to the user as
  follows:</p>

  <ul>
    <li>Zero properties returned - "There were no properties found
    for the given location."</li>

    <li>Location not matched - "The location given was not
    recognised."</li>

    <li>Network connection issues - "An error occurred while
    searching. Please check your network connection and try again."</li>

    <li>Location not enabled - "The use of location is currently
    disabled.&rdquo;</li>

    <li>Location not found - "Unable to detect current location.
    Please ensure location is turned on in your phone settings and try
    again.&rdquo;</li>
  </ul>

  <p>In error state, the search field behaves in exactly the same way as
  the initial state.</p>
    
  <h1>Search Results  Page</h1>

  <h2>Form</h2>

  <p><img height="396" src="images/image03.png" width="244" /></p>

  <p>The search results page displays a list of properties in the order
  returned by the Nestoria APIs. The style of the list presentation is flexible dependant
  on the platform and framework used.</p>

  <p>The page title should indicate the number of properties displayed
  together with the total number of matches.</p>

  <h2>Function</h2>

  <p>It should be possible to navigate from this page back to the
  Property Search page via a button or hardware back button depending on target
  platform.</p>

  <p>When the user taps on a property listing the application navigates
  to the Property Listing page.</p>

  <p>At the bottom of the list, if there are more results available, a
  &lsquo;Load more&rsquo; button or item should be rendered. When the user taps this item
  Nestoria is queried to obtain more items, with these being added to the
  list.</p>

  <p>TODO:&nbsp;What happens is a &lsquo;load
  more&rsquo; action results in a network error?</p>

  <h1>Property Listing  Page</h1>

  <h2>Form</h2>

  <p><img height="409" src="images/image02.png" width="243" /></p>

  <p>The listing page displays:</p>

  <ul>
    <li>The property price</li>

    <li>The location - Nestoria provides a &lsquo;title&rsquo; which
    is a comma separated text string with multiple components. For brevity, this should
    be truncated to the first two title components</li>

    <li>An image</li>

    <li>The number of bedrooms and bathrooms</li>

    <li>The summary text</li>

    <li>A button to toggle favourite state</li>
  </ul>

  <h2>Function</h2>

  <p>Tapping the favourites button should toggle the persisted favourite
  state of this property.</p>

  <p>It should be possible to navigate from this page back to the Search
  Results or Favourites page via a button or hardware back button depending on target
  platform.</p>

  <h1>Favourites Page</h1>

  <h2>Form</h2>

  <p><img height="399" src="images/image00.png" width="220" /></p>

  <p>The favourites page renders a list of the properties that the user
  has &lsquo;favourited&rsquo;</p>

  <h2>Function</h2>

  <p>Tapping on a property navigates to the Property Listing
  page.</p>

  <p>It should be possible to navigate from this page back to the
  Property Search page via a button or hardware back button depending on target
  platform.</p>

</body>
</html>
